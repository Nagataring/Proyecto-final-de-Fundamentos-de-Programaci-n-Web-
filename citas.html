
<!doctype html><html lang="es"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Citas - Taller</title><link rel="icon" href="assets/favicon.svg"><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"><link rel="stylesheet" href="assets/main.css"></head>
<body>
<nav class="navbar fixed-top navbar-dark bg-dark"><div class="container"><a class="navbar-brand header-logo" href="index.html"><img src="assets/logo.svg" width="28"><span>Taller Navarro Dava</span></a></div></nav>
<main class="container py-5" data-require-login="1">
  <a class="btn btn-sm btn-secondary btn-back mb-3">← Volver</a>
  <h3>Solicitar cita</h3>
  <form id="appointmentForm">
    <div class="mb-3"><label>Placa</label><input class="form-control" name="plate" required></div>
    <div class="mb-3"><label>Fecha preferida</label><input class="form-control" name="date" type="date" required></div>
    <div class="mb-3"><label>Servicio</label><input class="form-control" name="service" required></div>
    <button class="btn btn-primary">Solicitar cita</button>
  </form>

  <hr>
  <h4>Mis solicitudes</h4>
  <div id="appointmentsList"></div>
</main>
<script>
function renderAppointments(){
  const arr = JSON.parse(localStorage.getItem("appointments")||"[]");
  const out = document.getElementById("appointmentsList");
  out.innerHTML = "";
  arr.forEach((a,i)=>{
    out.innerHTML += `<div class="card mb-2"><div class="card-body"><p><strong>Placa:</strong> ${a.plate} · <strong>Fecha:</strong> ${a.date}</p><p><strong>Estado:</strong> ${a.status||'Pendiente'}</p></div></div>`;
  });
}

document.getElementById("appointmentForm").addEventListener("submit", function(e){
  e.preventDefault();
  const f = e.target;
  const obj = {plate:f.plate.value, date:f.date.value, service:f.service.value, status:"Pendiente"};
  const arr = JSON.parse(localStorage.getItem("appointments")||"[]");
  arr.push(obj);
  localStorage.setItem("appointments", JSON.stringify(arr));
  alert("Solicitud enviada. El taller confirmará la cita (demo).");
  renderAppointments();
});

document.addEventListener("DOMContentLoaded", renderAppointments);
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="assets/main.js"></script>
</body></html>
